// Generated by BUCKLESCRIPT VERSION 5.0.0, PLEASE EDIT WITH CARE
'use strict';

var IsomorphicWs = require("isomorphic-ws");
var Caml_exceptions = require("bs-platform/lib/js/caml_exceptions.js");

var SocketClosed = Caml_exceptions.create("Bot-Record.SocketClosed");

var SocketError = Caml_exceptions.create("Bot-Record.SocketError");

function bot(settings) {
  return new Promise((function (resolve, reject) {
                var ws = new IsomorphicWs("wss://gateway.discord.gg/?v=6&encoding=json");
                ws.on("open", (function (param) {
                              console.log("Opened");
                              return resolve(/* record */[
                                          /* settings */settings,
                                          /* ws */ws
                                        ]);
                            })).on("close", (function (code, reason) {
                            console.log("Closed " + (String(code) + (": " + reason)));
                            return reject([
                                        SocketClosed,
                                        code,
                                        reason
                                      ]);
                          })).on("error", (function (error) {
                          console.log("Error: " + error.message);
                          return reject([
                                      SocketError,
                                      error
                                    ]);
                        })).on("message", (function (message) {
                        console.log(message);
                        return /* () */0;
                      }));
                return /* () */0;
              }));
}

exports.SocketClosed = SocketClosed;
exports.SocketError = SocketError;
exports.bot = bot;
/* isomorphic-ws Not a pure module */
